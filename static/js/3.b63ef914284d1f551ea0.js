webpackJsonp([3],{E6uR:function(e,t){},Vu5o:function(e,t){},emPC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="",n={created:function(){o=this,this.reloadUsers()},data:function(){return{ed:{user:{username:"",nickname:"",password:"",email:"",roles:[]}},show:{addUser:!1},page:{pageIndex:1,pageSize:10,total:0},list:{users:[],roles:[]}}},methods:{delUser:function(e){o.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){axios.get("/human/delBack?id="+e.id).then(function(e){200==e.code&&(o.$message({message:"删除成功",type:"success"}),o.reloadUsers())})})},pageChange:function(e){o.page.pageIndex=e,o.reloadUsers()},addUser:function(e,t){"show"==e&&(o.show.addUser=!0,o.reloadRoles()),"edit"==e&&(o.reloadRoles(),o.show.addUser=!0,o.ed.user.id=t.id,o.ed.user.username=t.username,o.ed.user.nickname=t.nickname,o.ed.user.password=t.password,o.ed.user.email=t.email,o.ed.user.roles=t.roles.map(function(e){return e.id})),"close"==e&&(o.show.addUser=!1,o.ed.user.id="",o.ed.user.username="",o.ed.user.nickname="",o.ed.user.password="",o.ed.user.email="",o.ed.user.roles=[]),"confirm"==e&&axios.get("/human/addHumanFromBack",{params:{id:o.ed.user.id,username:o.ed.user.username,nickname:o.ed.user.nickname,raw_password:o.ed.user.password,email:o.ed.user.email,roleIds:o.ed.user.roles.join(",")}}).then(function(e){o.addUser("close"),200==e.code&&(o.$message({message:"添加成功",type:"success"}),o.reloadUsers())})},reloadUsers:function(){axios.get("/human/backList").then(function(e){200==e.code&&(o.list.users=e.data)})},reloadRoles:function(){axios.get("/humanRole/get").then(function(e){200==e.code&&(o.list.roles=e.data.content)})}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{staticStyle:{margin:"10px 20px"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.addUser("show")}}},[e._v("直接添加用户")]),e._v(" "),s("el-table",{attrs:{data:e.list.users}},[s("el-table-column",{attrs:{label:"用户名","show-overflow-tooltip":!0,prop:"username"}}),e._v(" "),s("el-table-column",{attrs:{label:"昵称","show-overflow-tooltip":!0,prop:"nickname"}}),e._v(" "),s("el-table-column",{attrs:{label:"邮箱","show-overflow-tooltip":!0,prop:"email"}}),e._v(" "),s("el-table-column",{attrs:{label:"角色","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,function(t,o){return s("el-tag",{key:o,staticStyle:{margin:"3px"},attrs:{size:"mini"}},[e._v("\n          "+e._s(t.roleName)+"\n        ")])})}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(s){return e.addUser("edit",t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.delUser(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":e.page.pageSize,"current-page":e.page.pageIndex,total:e.page.total},on:{"current-change":e.pageChange}}),e._v(" "),s("el-dialog",{attrs:{visible:e.show.addUser,title:"编辑/新建用户"},on:{"update:visible":function(t){return e.$set(e.show,"addUser",t)}}},[s("el-form",[s("el-form-item",{attrs:{label:"用户名"}},[[s("el-input",{model:{value:e.ed.user.username,callback:function(t){e.$set(e.ed.user,"username","string"==typeof t?t.trim():t)},expression:"ed.user.username"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"用户昵称"}},[[s("el-input",{model:{value:e.ed.user.nickname,callback:function(t){e.$set(e.ed.user,"nickname","string"==typeof t?t.trim():t)},expression:"ed.user.nickname"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"用户密码"}},[[s("el-input",{model:{value:e.ed.user.password,callback:function(t){e.$set(e.ed.user,"password","string"==typeof t?t.trim():t)},expression:"ed.user.password"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"用户邮箱"}},[[s("el-input",{model:{value:e.ed.user.email,callback:function(t){e.$set(e.ed.user,"email","string"==typeof t?t.trim():t)},expression:"ed.user.email"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"具有角色"}},[[s("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),s("el-checkbox-group",{model:{value:e.ed.user.roles,callback:function(t){e.$set(e.ed.user,"roles",t)},expression:"ed.user.roles"}},[e._v("\n            "+e._s(e.list.roles)+"\n            "),e._l(e.list.roles,function(t,o){return s("el-checkbox",{key:o,attrs:{label:t.id}},[e._v(e._s(t.roleName))])})],2)]],2)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:5}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser("confirm")}}},[e._v("确定")])],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-button",[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var i="",r={mounted:function(){i=this,this.reloadRoles()},data:function(){return{ed:{role:{id:"",name:"",permission:[]}},show:{addRole:!1},page:{pageIndex:1,pageSize:10,total:0},list:{roles:[],permission:[]}}},methods:{delRole:function(e){i.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){axios.get("/humanRole/delBack?id="+e.roleId).then(function(e){200==e.code&&(i.$message({message:"删除成功",type:"success"}),i.reloadRoles())})})},pageChange:function(e){i.page.pageIndex=e,i.reloadRoles()},addRole:function(e,t){"show"==e&&(i.addRole("close"),i.show.addRole=!0,i.reloadPermissions()),"edit"==e&&(i.show.addRole=!0,i.ed.role.id=t.roleId,i.ed.role.name=t.name,i.ed.role.permission=t.permissions.map(function(e){return e.id}),i.reloadPermissions()),"close"==e&&(i.show.addRole=!1,i.ed.role.id="",i.ed.role.name="",i.ed.role.permission=[]),"confirm"==e&&axios.get("/humanRole/addRoleBack",{params:{id:i.ed.role.id,roleName:i.ed.role.name,permissionIds:i.ed.role.permission.join(",")}}).then(function(e){i.addRole("close"),200==e.code&&(i.$message({message:"添加成功",type:"success"}),i.reloadRoles())})},reloadRoles:function(){axios.get("/humanRole/getRoleBackWithPermission").then(function(e){200==e.code&&(i.list.roles=e.data,i.page.total=e.additonalData.total)})},reloadPermissions:function(){axios.get("/permission/getPermissionBackWithRoleName").then(function(e){200==e.code&&(i.list.permission=e.data)})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{staticStyle:{margin:"10px 20px"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.addRole("show")}}},[e._v("直接添加角色")]),e._v(" "),s("el-table",{attrs:{data:e.list.roles}},[s("el-table-column",{attrs:{label:"角色名","show-overflow-tooltip":!0,prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"拥有权限","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissions,function(t,o){return s("el-tag",{key:o,staticStyle:{margin:"3px"},attrs:{size:"mini"}},[e._v("\n          "+e._s(t.name)+"\n        ")])})}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(s){return e.addRole("edit",t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.delRole(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":e.page.pageSize,"current-page":e.page.pageIndex,total:e.page.total},on:{"current-change":e.pageChange}}),e._v(" "),s("el-dialog",{attrs:{visible:e.show.addRole,title:"编辑/新建角色"},on:{"update:visible":function(t){return e.$set(e.show,"addRole",t)}}},[s("el-form",{attrs:{"abel-position":"left"}},[s("el-form-item",{attrs:{label:"角色名:"}},[s("el-input",{model:{value:e.ed.role.name,callback:function(t){e.$set(e.ed.role,"name","string"==typeof t?t.trim():t)},expression:"ed.role.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"具有 permission:"}},[[s("div",[s("el-checkbox-group",{model:{value:e.ed.role.permission,callback:function(t){e.$set(e.ed.role,"permission",t)},expression:"ed.role.permission"}},e._l(e.list.permission,function(t,o){return s("el-checkbox",{key:o,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]],2)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:5}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRole("confirm")}}},[e._v("确定")])],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-button",[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d="",c={created:function(){d=this,this.reloadPermissions()},data:function(){return{ed:{permission:{id:"",name:"",frontUrls:"",backUrls:""}},show:{addPermission:!1},page:{pageIndex:1,pageSize:10,total:0},list:{users:[]}}},methods:{delPermission:function(e){d.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){axios.get("/permission/delBack?id="+e.id).then(function(e){200==e.code&&(d.$message({message:"删除成功",type:"success"}),d.reloadPermissions())})})},pageChange:function(e){d.page.pageIndex=e,d.reloadPermissions()},addPermission:function(e,t){if("show"==e&&(d.show.addPermission=!0,d.reloadRoles()),"close"==e&&(d.show.addPermission=!1,d.ed.permission.id="",d.ed.permission.name="",d.ed.permission.frontUrls="",d.ed.permission.backUrls=""),"edit"==e&&(d.show.addPermission=!0,d.ed.permission.id=t.id,d.ed.permission.name=t.name,d.ed.permission.frontUrls=t.frontUrls,d.ed.permission.backUrls=t.backUrls),"confirm"==e){var s="/permission/add",o={name:d.ed.permission.name,frontUrls:d.ed.permission.frontUrls,backUrls:d.ed.permission.backUrls};d.ed.permission.id&&(s="/permission/update",o.id=d.ed.permission.id),axios.get(s,{params:o}).then(function(e){d.addPermission("close"),200==e.code&&(d.$message({message:"添加成功",type:"success"}),d.reloadPermissions())})}},reloadPermissions:function(){axios.get("/permission/getPermissionBackWithRoleName").then(function(e){200==e.code&&(d.list.users=e.data,d.page.total=e.additonalData.total)})},reloadRoles:function(){axios.get("/humanRole/get").then(function(e){200==e.code&&(d.list.roles=e.data.content)})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{staticStyle:{margin:"10px 20px"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.addPermission("show")}}},[e._v("直接添加permission")]),e._v(" "),s("el-table",{attrs:{data:e.list.users}},[s("el-table-column",{attrs:{label:"permission名称","show-overflow-tooltip":!0,prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"前端允许访问地址","show-overflow-tooltip":!0,prop:"frontUrls"}}),e._v(" "),s("el-table-column",{attrs:{label:"允许访问接口","show-overflow-tooltip":!0,prop:"backUrls"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(s){return e.addPermission("edit",t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.delPermission(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":e.page.pageSize,"current-page":e.page.pageIndex,total:e.page.total},on:{"current-change":e.pageChange}}),e._v(" "),s("el-dialog",{attrs:{visible:e.show.addPermission,title:"编辑/新建 permission"},on:{"update:visible":function(t){return e.$set(e.show,"addPermission",t)}}},[s("el-form",[s("el-form-item",{attrs:{label:"名称"}},[[s("el-input",{model:{value:e.ed.permission.name,callback:function(t){e.$set(e.ed.permission,"name","string"==typeof t?t.trim():t)},expression:"ed.permission.name"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"前端允许访问地址"}},[[s("el-input",{attrs:{type:"textarea"},model:{value:e.ed.permission.frontUrls,callback:function(t){e.$set(e.ed.permission,"frontUrls","string"==typeof t?t.trim():t)},expression:"ed.permission.frontUrls"}})]],2),e._v(" "),s("el-form-item",{attrs:{label:"允许访问接口"}},[[s("el-input",{attrs:{type:"textarea"},model:{value:e.ed.permission.backUrls,callback:function(t){e.$set(e.ed.permission,"backUrls","string"==typeof t?t.trim():t)},expression:"ed.permission.backUrls"}})]],2)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:5}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPermission("confirm")}}},[e._v("确定")])],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-button",[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var m="",p={mounted:function(){m=this,this.reloadItems()},data:function(){return{loading:{items:!1},type:"datasetType",ed:{role:{id:"",name:"",permission:[]}},show:{addRole:!1},page:{pageIndex:1,pageSize:10,total:0},list:{items:[]}}},methods:{delItem:function(e){m.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){axios.get("/dataset/delDatasetType?id="+e).then(function(e){200==e.code&&(m.$message({message:"删除成功",type:"success"}),m.reloadItems())})})},pageChange:function(e){m.page.pageIndex=e,m.reloadItems()},addItem:function(e,t){"show"==e&&(m.addItem("close"),m.show.addItem=!0,m.reloadItems()),"edit"==e&&(m.show.addItem=!0,m.ed.datasetType={name:t.item,dataTypeDesc:t.dataTypeDesc}),"close"==e&&(m.show.addItem=!1,m.ed.item={}),"confirm"==e&&axios.get("/humanRole/addRoleBack",{params:{id:m.ed.role.id,roleName:m.ed.role.name,permissionIds:m.ed.role.permission.join(",")}}).then(function(e){m.addRole("close"),200==e.code&&(m.$message({message:"添加成功",type:"success"}),m.reloadRoles())})},reloadItems:function(){var e="",t=this;t.loading.items=!0;t.page.pageIndex,t.page.pageSize;"datasetType"==t.type&&(e="/dataset/getDatasetTypes"),axios.get(e).then(function(e){t.loading.items=!1,200==e.code&&"datasetType"==t.type&&(t.list.items=e.data.content,t.page.total=e.data.totalElements)})}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{staticStyle:{margin:"10px 20px"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.addRole("show")}}},[e._v("直接数据类型")]),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.items,expression:"loading.items"}],attrs:{data:e.list.items}},[s("el-table-column",{attrs:{label:"类型名称","show-overflow-tooltip":!0,prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"描述","show-overflow-tooltip":!0,prop:"dataTypeDesc"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(s){return e.addItem("edit",t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.delItem(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":e.page.pageSize,"current-page":e.page.pageIndex,total:e.page.total},on:{"current-change":e.pageChange}}),e._v(" "),s("el-dialog",{attrs:{visible:e.show.addRole,title:"编辑/新建角色"},on:{"update:visible":function(t){return e.$set(e.show,"addRole",t)}}},[s("el-form",{attrs:{"abel-position":"left"}},[s("el-form-item",{attrs:{label:"角色名:"}},[s("el-input",{model:{value:e.ed.role.name,callback:function(t){e.$set(e.ed.role,"name","string"==typeof t?t.trim():t)},expression:"ed.role.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"具有 permission:"}},[[s("div",[s("el-checkbox-group",{model:{value:e.ed.role.permission,callback:function(t){e.$set(e.ed.role,"permission",t)},expression:"ed.role.permission"}},e._l(e.list.permission,function(t,o){return s("el-checkbox",{key:o,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]],2)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:5}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRole("confirm")}}},[e._v("确定")])],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-button",[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var g={components:{backUsers:s("VU/8")(n,a,!1,function(e){s("E6uR")},null,null).exports,backRoles:s("VU/8")(r,l,!1,function(e){s("p3yQ")},null,null).exports,backPermissions:s("VU/8")(c,u,!1,function(e){s("k5/r")},null,null).exports,backDatasetType:s("VU/8")(p,f,!1,function(e){s("iWej")},null,null).exports},data:function(){return{tab:"user"}},methods:{}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("后台管理")]),e._v(" "),s("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("el-tab-pane",{attrs:{label:"用户管理",name:"user"}},["user"==e.tab?s("back-users"):e._e()],1),e._v(" "),s("el-tab-pane",{attrs:{label:"角色管理",name:"role"}},["role"==e.tab?s("back-roles"):e._e()],1),e._v(" "),s("el-tab-pane",{attrs:{label:"permission管理",name:"permission"}},["permission"==e.tab?s("back-permissions"):e._e()],1),e._v(" "),s("el-tab-pane",{attrs:{label:"数据类型管理",name:"datasetType"}},["datasetType"==e.tab?s("back-dataset-type"):e._e()],1)],1)],1)},staticRenderFns:[]};var v=s("VU/8")(g,b,!1,function(e){s("Vu5o")},null,null);t.default=v.exports},iWej:function(e,t){},"k5/r":function(e,t){},p3yQ:function(e,t){}});
//# sourceMappingURL=3.b63ef914284d1f551ea0.js.map