webpackJsonp([11],{Q2ax:function(t,e,a){"use strict";e.a=function(t){return Object(i.a)({url:"/recruit/add",method:"get",params:t})},e.d=function(t){return Object(i.a)({url:"/recruit/get",method:"get",params:t})},e.b=function(t){return Object(i.a)({url:"/recruit/del",method:"get",params:t})},e.c=function(t){return Object(i.a)({url:"/recruit/detail",method:"get",params:t})};var i=a("vLgD")},Xjiq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Mdjr"),n=a("ewfF"),o=a("5aCZ"),r=a("Q2ax"),c=a("vLgD");var s={components:{flatGreyHead:i.a,navBar:n.a,tinymce:o.a},created:function(){this.reloadRecurits()},beforeMount:function(){var t=document.body.clientWidth;t*=.9,t*=.81,this.v.tinymceWidth=t},methods:{addCompany:function(t){var e,a=this;"show"==t&&(a.show.addCompany=!0),"close"==t&&(a.show.addCompany=!0,a.editCompany.companyName="",a.editCompany.companyDesc="",a.editCompany.companyUrl=""),"confirm"==t&&(e={companyName:a.editCompany.companyName,companyDesc:a.editCompany.companyDesc,companyUrl:a.editCompany.companyUrl},Object(c.a)({url:"/company/add",method:"get",params:e})).then(function(t){200==t.code&&(a.$message({message:"添加成功",type:"success"}),a.reloadCompanys())})},reloadCompanys:function(){var t,e=this;Object(c.a)({url:"/company/get",method:"get",params:t}).then(function(t){200==t.code?e.list.companys=t.data.content:e.$message({message:"获取公司信息失败",type:"error"})})},editRecruit:function(t){var e=this;Object(r.d)({id:t}).then(function(t){200==t.code&&(e.v.addRecruitTitle=t.data.title,e.v.addRecruitContent=decodeURIComponent(t.data.content),e.v.addRecruitTitleId=t.data.id,e.v.addRecruitLocation=t.data.location,e.v.addRecruitSalary=t.data.salary,e.v.salaryUnit=t.data.salaryUnit,e.v.linkAddress=t.data.linkAddress)})},delRecruit:function(t){var e=this;Object(r.b)({id:t}).then(function(t){e.reloadRecurits()})},paraReset:function(){this.v.addRecruitTitle="",this.v.addRecruitContent="",this.v.addRecruitTimes[0]="",this.v.addRecruitTimes[1]="",this.v.addRecruitLocation="",this.v.addRecruitSalary="",this.v.highLight=""},changePage:function(t){this.pageIndex=t,this.reloadRecurits()},reloadRecurits:function(){var t=this;Object(r.d)({pageSize:this.page.pageSize,pageIndex:this.page.pageIndex}).then(function(e){200==e.code&&(t.list.recruits=e.data.content,t.page.count=e.data.totalElements)}).catch()},addRecruit:function(t){var e=this;if("show"==t&&(this.show.addRecruit=!0,this.paraReset()),"commit"==t){var a={title:this.v.addRecruitTitle,content:this.v.addRecruitContent,beginTime:this.v.addRecruitTimes[0],endTime:this.v.addRecruitTimes[1],location:this.v.addRecruitLocation,salaryMonthMin:parseInt(this.v.addRecruitSalaryMin),salaryMonthMax:parseInt(this.v.addRecruitSalaryMax),informationFrom:this.v.addRecruitInformationFrom,salaryUnit:this.v.salaryUnit,highLight:this.v.highLight,companyId:this.v.addRecruitCompanyId};a.content=encodeURIComponent(a.content),Object(r.a)(a).then(function(t){200==t.code&&(e.$message({message:"添加成功",type:"success"}),e.show.addRecruit=!1,e.paraReset(),e.reloadRecurits())}).catch(function(t){})}}},data:function(){return{page:{pageIndex:1,pageSize:10,count:0},editCompany:{companyName:"",companyDesc:"",companyUrl:""},show:{addRecruit:!1,addCompany:!1},v:{addRecruitTitle:"",addRecruitContent:"",addRecruitTimes:[],addRecruitLocation:"",addRecruitSalaryMin:0,addRecruitSalaryMax:0,addRecruitCompanyId:"",addRecruitInformationFrom:"",tinymceWidth:0},list:{recruits:[],companys:[]}}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{visible:t.show.addRecruit,width:"90%"},on:{"update:visible":function(e){return t.$set(t.show,"addRecruit",e)}}},[a("el-form",{attrs:{"label-width":"10%"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.v.addRecruitTitle,callback:function(e){t.$set(t.v,"addRecruitTitle","string"==typeof e?e.trim():e)},expression:"v.addRecruitTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{size:"mini"},model:{value:t.v.addRecruitCompanyId,callback:function(e){t.$set(t.v,"addRecruitCompanyId",e)},expression:"v.addRecruitCompanyId"}},t._l(t.list.companys,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.companyName}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.addCompany("show")}}},[t._v("添加公司")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("span",[t._v("工作地点")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini"},model:{value:t.v.addRecruitLocation,callback:function(e){t.$set(t.v,"addRecruitLocation","string"==typeof e?e.trim():e)},expression:"v.addRecruitLocation"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"薪资(月)"}},[a("el-row",[a("el-col",{attrs:{span:3,offset:0}},[a("el-input",{attrs:{size:"mini"},model:{value:t.v.addRecruitSalaryMin,callback:function(e){t.$set(t.v,"addRecruitSalaryMin","string"==typeof e?e.trim():e)},expression:"v.addRecruitSalaryMin"}})],1),t._v(" "),a("el-col",{attrs:{span:1,offset:0}},[t._v("\n            ~\n          ")]),t._v(" "),a("el-col",{attrs:{span:3,offset:0}},[a("el-input",{attrs:{size:"mini"},model:{value:t.v.addRecruitSalaryMax,callback:function(e){t.$set(t.v,"addRecruitSalaryMax","string"==typeof e?e.trim():e)},expression:"v.addRecruitSalaryMax"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"有效期"}},[a("el-date-picker",{attrs:{size:"mini","value-format":"yyyy/MM/dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.v.addRecruitTimes,callback:function(e){t.$set(t.v,"addRecruitTimes",e)},expression:"v.addRecruitTimes"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"信息来源"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.v.addRecruitInformationFrom,callback:function(e){t.$set(t.v,"addRecruitInformationFrom","string"==typeof e?e.trim():e)},expression:"v.addRecruitInformationFrom"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("tinymce",{attrs:{width:t.v.tinymceWidth},model:{value:t.v.addRecruitContent,callback:function(e){t.$set(t.v,"addRecruitContent",e)},expression:"v.addRecruitContent"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:3,offset:5}},[a("el-button",{style:"width:100%",attrs:{type:"primary"},on:{click:function(e){return t.addRecruit("commit")}}},[t._v("写好了")])],1),t._v(" "),a("el-col",{attrs:{span:3,offset:2}},[a("el-button",{style:"width:100%"},[t._v("不行，我要重写")])],1),t._v(" "),a("el-col",{attrs:{span:3,offset:2}},[a("el-button",{style:"width:100%"},[t._v("不写了")])],1)],1)],1),t._v(" "),a("flatGreyHead"),t._v(" "),a("nav-bar",{attrs:{cur:"5"}}),t._v(" "),a("el-button",{staticStyle:{margin:"20px"},attrs:{type:"warning"},on:{click:function(e){t.reloadCompanys(),t.addRecruit("show")}}},[t._v("添加招聘信息")]),t._v(" "),a("el-table",{attrs:{data:t.list.recruits}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/cDetail?tp=recruit&id="+e.row.id}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.editRecruit(e.row.id)}}})]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.delRecruit(e.row.id)}}})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.salaryMonthMin)+"-"+t._s(e.row.salaryMonthMax)+"/月")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.company||"").companyName))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.location))]}}])})],1),t._v(" "),a("el-pagination",{attrs:{total:t.page.count,"current-page":t.page.pageIndex},on:{"current-change":t.changePage}}),t._v(" "),a("el-dialog",{attrs:{title:"添加公司",visible:t.show.addCompany},on:{"update:visible":function(e){return t.$set(t.show,"addCompany",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.editCompany.companyName,callback:function(e){t.$set(t.editCompany,"companyName",e)},expression:"editCompany.companyName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司描述"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.editCompany.companyDesc,callback:function(e){t.$set(t.editCompany,"companyDesc",e)},expression:"editCompany.companyDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司主页"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.editCompany.companyUrl,callback:function(e){t.$set(t.editCompany,"companyUrl",e)},expression:"editCompany.companyUrl"}})],1)],1),t._v(" "),a("el-row",{attrs:{justify:"center"}},[a("el-col",{attrs:{span:"5"}},[a("el-button",{on:{click:function(e){return t.addCompany("confirm")}}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,d,!1,function(t){a("znaY")},"data-v-5f18621f",null);e.default=l.exports},znaY:function(t,e){}});