webpackJsonp([4],{"9bBU":function(t,e,o){o("mClu");var i=o("FeBl").Object;t.exports=function(t,e,o){return i.defineProperty(t,e,o)}},C4MV:function(t,e,o){t.exports={default:o("9bBU"),__esModule:!0}},bOdI:function(t,e,o){"use strict";e.__esModule=!0;var i,n=o("C4MV"),l=(i=n)&&i.__esModule?i:{default:i};e.default=function(t,e,o){return e in t?(0,l.default)(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},mClu:function(t,e,o){var i=o("kM2E");i(i.S+i.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})},p9hY:function(t,e){},tV1m:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("bOdI"),n=o.n(i),l=o("Mdjr"),s=o("ewfF"),a=o("5aCZ"),r=o("FbwR"),c=o("vLgD");o("mw3O");var d={components:{flatGreyHead:l.a,tinymce:a.a,navBar:s.a},beforeMount:function(){var t=document.body.clientWidth;t*=.9,t*=.81,this.v.tinymceWidth=t},created:function(){this.reloadSolutions()},data:function(){return{competitions:[],competitionSponsers:[],editingItem:{solution:{title:"",competitionId:"",createTime:"",rank:0,top:0,logo:"",content:"",creatorUserId:"",link:""},competition:{logo:"",title:"",competitionSponserId:"",link:""},competitionSponser:n()({logo:"",link:""},"link","")},page:{pageSize:10,pageIndex:1},solution:{title:"",content:"",rank:"",year:2019},isCollapse:!0,v:{solutionType:9},show:{addSolution:!1,addCompetition:!1,addCompetitionSponser:!1},list:{solutions:[],sponsers:[],years:[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,""].reverse(),ranks:["","TOP1","TOP2","TOP3","TOP5","TOP10","TOP30"]}}},methods:{reloadCompetitionSponsers:function(){var t,e=this;Object(c.a)({url:"/competition/getCompetitionSponsers",method:"get",params:t}).then(function(t){200==t.code?e.competitionSponsers=t.data:e.$message({message:"获取比赛方数据失败",type:"error"})})},addCompetitionSponser:function(t){var e,o=this;"show"==t&&(this.show.addCompetitionSponser=!0),"confirm"==t&&(e={name:o.editingItem.competitionSponser.title,logo:o.editingItem.competitionSponser.log,link:o.editingItem.competitionSponser.link},Object(c.a)({url:"/competition/addCompetitionSponser",method:"get",params:e})).then(function(t){200==t.code?(o.$message({message:"添加成功",type:"success"}),o.reloadCompetitionSponsers(),o.show.addCompetitionSponser=!1):o.$message({message:"添加失败",type:"error"})})},addCompetition:function(t){var e,o=this;"show"==t&&(this.show.addCompetition=!0,this.reloadCompetitionSponsers()),"confirm"==t&&(e={title:o.editingItem.competition.title,logo:o.editingItem.competition.logo,link:o.editingItem.competition.link,sponserId:o.editingItem.competition.competitionSponserId},Object(c.a)({url:"/competition/addCompetition",method:"get",params:e})).then(function(t){200==t.code?(o.$message({message:"添加成功",type:"success"}),o.show.addCompetition=!1,o.reloadCompetitions()):o.$message({message:"添加失败",type:"error"})})},reloadCompetitions:function(){var t,e=this;Object(c.a)({url:"/competition/getAllCompetitions",method:"get",params:t}).then(function(t){200==t.code?e.competitions=t.data:e.$message({message:"获取竞赛列表失败",type:"error"})})},edit:function(t){var e=this;detail({id:t}).then(function(o){(o.code=200)&&(e.solution.id=t,e.solution.title=o.data.title||"",e.solution.content=decodeURIComponent(o.data.content||""),e.v.logo=o.data.logo||"",e.solution.rank=o.data.rank,e.solution.year=o.data.year,e.solution.sponser=o.data.sponser,e.show.addSolution=!0)})},logoUploadSuccess:function(t,e,o){this.v.logo=t.fileCode},reload_sponsers:function(){var t=this;getCompetionSponsers().then(function(e){200==e.code&&(t.list.sponsers=e.data||[])}).catch()},delSolution:function(t){var e=this;this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){Object(r.b)({id:t}).then(function(t){e.reloadSolutions()})})},pageChange:function(t){this.page.pageIndex=t,this.reloadSolutions()},insertSolution:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;return""==this.solution.title?(this.$message({message:"标题不能为空",type:"error"}),!1):""==this.solution.content?(this.$message({message:"内容不能为空",type:"error"}),!1):""==this.solution.rank?(this.$message({message:"排名不能为空",type:"error"}),!1):""==this.solution.year?(this.$message({message:"年份不能为空",type:"error"}),!1):(this.solution.content=encodeURIComponent(this.solution.content),void(this.solution.id?editSolution({id:this.solution.id,title:this.solution.title,content:this.solution.content,rank:this.solution.rank,year:this.solution.year,link:this.solution.link}).then(function(e){200==e.code&&(t.solution={},t.show.addSolution=!1)}).catch():insertSolution({title:this.solution.title,content:this.solution.content,rank:this.solution.rank,year:this.solution.year,link:this.solution.link}).then(function(e){200==e.code&&(t.solution={},t.show.addSolution=!1)}).catch()))}),addSolution:function(t,e){var o=this;if("show"==t&&(this.reloadCompetitionSponsers(),this.solution.id="",this.show.addSolution=!0,this.reloadCompetitions()),"edit"==t&&(o.editingItem.solution.id=e.id,o.editingItem.solution.competitionId=e.competition.id,o.editingItem.solution.title=e.solutionTitle,o.editingItem.solution.rank=e.solutionRank,o.editingItem.solution.top=e.solutionTop,o.editingItem.solution.logo=e.logo,o.editingItem.solution.content=e.content,this.show.addSolution=!0,this.reloadCompetitions()),"confirm"==t){var i={competitionId:o.editingItem.solution.competitionId,solutionTitle:o.editingItem.solution.title,solutionRank:o.editingItem.solution.rank,solutionTop:o.editingItem.solution.top,logo:o.editingItem.solution.logo,content:o.editingItem.solution.content};o.editingItem.solution.id&&(i.id=o.editingItem.solution.id),Object(r.a)(i).then(function(t){200==t.code?(o.$message({message:o.editingItem.solution.id?"编辑成功":"添加成功",type:"success"}),o.reloadSolutions(),o.show.addSolution=!1):o.$message({message:"添加失败",type:"error"})})}},reloadSolutions:function(){var t=this;Object(r.d)({pageSize:this.page.pageSize,pageIndex:this.page.pageIndex}).then(function(e){200==e.code&&(t.list.solutions=e.data.content,t.page.total=e.data.totalElements)}).catch()},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{visible:t.show.addSolution,width:"90%"},on:{"update:visible":function(e){return t.$set(t.show,"addSolution",e)}}},[o("el-form",{attrs:{"label-width":"10%"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:t.editingItem.solution.title,callback:function(e){t.$set(t.editingItem.solution,"title","string"==typeof e?e.trim():e)},expression:"editingItem.solution.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"来源"}},[o("el-input",{model:{value:t.editingItem.solution.link,callback:function(e){t.$set(t.editingItem.solution,"link","string"==typeof e?e.trim():e)},expression:"editingItem.solution.link"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"比赛"}},[o("el-row",[o("el-col",{attrs:{span:18}},[o("el-select",{model:{value:t.editingItem.solution.competitionId,callback:function(e){t.$set(t.editingItem.solution,"competitionId",e)},expression:"editingItem.solution.competitionId"}},t._l(t.competitions,function(t,e){return o("el-option",{key:e,attrs:{value:t.id,label:t.title}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addCompetition("show")}}},[t._v("添加比赛")])],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"Rank"}},[o("el-row",[o("el-col",{attrs:{span:2}},[o("el-input",{attrs:{placeholder:""},model:{value:t.editingItem.solution.rank,callback:function(e){t.$set(t.editingItem.solution,"rank",e)},expression:"editingItem.solution.rank"}})],1),t._v(" "),o("el-col",{attrs:{offset:1,span:1}},[t._v("Top")]),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-input",{attrs:{placeholder:""},model:{value:t.editingItem.solution.top,callback:function(e){t.$set(t.editingItem.solution,"top",e)},expression:"editingItem.solution.top"}})],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"Logo"}},[o("el-input",{attrs:{placeholder:""},model:{value:t.editingItem.solution.logo,callback:function(e){t.$set(t.editingItem.solution,"logo",e)},expression:"editingItem.solution.logo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容"}},[o("tinymce",{attrs:{width:t.v.tinymceWidth},model:{value:t.editingItem.solution.content,callback:function(e){t.$set(t.editingItem.solution,"content",e)},expression:"editingItem.solution.content"}})],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:3,offset:10}},[o("el-button",{style:"width:100%",attrs:{type:"primary"},on:{click:function(e){return t.addSolution("confirm")}}},[t._v("写好了")])],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"添加比赛",visible:t.show.addCompetition},on:{"update:visible":function(e){return t.$set(t.show,"addCompetition",e)}}},[o("el-form",[o("el-form-item",{attrs:{label:"Logo"}},[o("span",[t._v("123")])]),t._v(" "),o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{attrs:{placeholder:"比赛名称"},model:{value:t.editingItem.competition.title,callback:function(e){t.$set(t.editingItem.competition,"title",e)},expression:"editingItem.competition.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"举办方"}},[o("el-row",[o("el-col",{attrs:{span:18}},[o("el-select",{attrs:{placeholder:""},model:{value:t.editingItem.competition.competitionSponserId,callback:function(e){t.$set(t.editingItem.competition,"competitionSponserId",e)},expression:"editingItem.competition.competitionSponserId"}},t._l(t.competitionSponsers,function(t,e){return o("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addCompetitionSponser("show")}}},[t._v("添加比赛方")])],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"比赛链接"}},[o("el-input",{attrs:{placeholder:"比赛名称"},model:{value:t.editingItem.competition.link,callback:function(e){t.$set(t.editingItem.competition,"link",e)},expression:"editingItem.competition.link"}})],1)],1),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addCompetition("confirm")}}},[t._v("添加比赛")])],1),t._v(" "),o("el-dialog",{attrs:{title:"添加比赛方",visible:t.show.addCompetitionSponser},on:{"update:visible":function(e){return t.$set(t.show,"addCompetitionSponser",e)}}},[o("el-form",[o("el-form-item",{attrs:{label:"Logo"}},[o("el-input",{attrs:{placeholder:"比赛方名称(Kaggle)"},model:{value:t.editingItem.competitionSponser.logo,callback:function(e){t.$set(t.editingItem.competitionSponser,"logo",e)},expression:"editingItem.competitionSponser.logo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{attrs:{placeholder:"比赛方名称(Kaggle)"},model:{value:t.editingItem.competitionSponser.title,callback:function(e){t.$set(t.editingItem.competitionSponser,"title",e)},expression:"editingItem.competitionSponser.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"网站"}},[o("el-input",{model:{value:t.editingItem.competitionSponser.link,callback:function(e){t.$set(t.editingItem.competitionSponser,"link",e)},expression:"editingItem.competitionSponser.link"}})],1)],1),t._v(" "),o("el-button",{staticStyle:{"margin-top":"20px","margin-left":"40%"},attrs:{type:"primary"},on:{click:function(e){return t.addCompetitionSponser("confirm")}}},[t._v("添加比赛方")])],1),t._v(" "),o("flatGreyHead"),t._v(" "),o("nav-bar",{attrs:{cur:"4"}}),t._v(" "),o("el-button",{on:{click:function(e){return t.addSolution("show")}}},[t._v("添加solution")]),t._v(" "),o("el-table",{attrs:{data:t.list.solutions}},[o("el-table-column",{attrs:{width:"100"}}),t._v(" "),o("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-image",{attrs:{src:t.row.logo}},[o("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline"})])])]}}])}),t._v(" "),o("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[o("router-link",{attrs:{to:"/cDetail?id="+e.row.id+"&tp=solution"}},[t._v(t._s(e.row.solutionTitle))])]}}])}),t._v(" "),o("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",[t._v("比赛："+t._s(e.row.competition.title))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",[t._v("Rank"+t._s(e.row.solutionRank))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",[t._v("Top"+t._s(e.row.solutionTop))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"el-icon-edit",on:{click:function(o){return t.addSolution("edit",e.row)}}})]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"el-icon-delete",on:{click:function(o){return t.delSolution(e.row.id)}}})]}}])})],1),t._v(" "),o("el-pagination",{attrs:{total:t.page.total,"page-size":t.page.pageSize,"current-page":t.page.pageIndex},on:{"current-change":t.pageChange}})],1)},staticRenderFns:[]};var m=o("VU/8")(d,u,!1,function(t){o("p9hY")},"data-v-fd0b5ff8",null);e.default=m.exports}});
//# sourceMappingURL=4.deb43615e0c86983cd9a.js.map