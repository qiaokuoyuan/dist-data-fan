webpackJsonp([5],{"9bBU":function(t,e,a){a("mClu");var s=a("FeBl").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},"T+/8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),o=a.n(s);var i=a("hNpR"),n=a.n(i),r=a("vLgD");var l={components:{},data:function(){return{display:"login",show:{sendEmail:!1},username:"",nickname:"",password:"",re_password:"",email_token:"",email:"",captcha:"",loginRules:{username:[{required:!0,trigger:"blur",validator:function(t,e,a){var s;(s=e)&&s.length>2?a():a(new Error("请输入正确的用户名"))}}],password:[{required:!0,trigger:"blur",validator:function(t,e,a){e.length<3?a(new Error("密码不能小于3位")):a()}}]},loading:!1,login_center_bg:n.a}},methods:{login:function(){var t=this;axios.get("/simpleLogin/login",{params:{username:t.username,raw_password:t.password}}).then(function(e){200==e.code&&(t.$store.commit("setToken",e.additonalData.token),localStorage.setItem("data_fan_token",e.additonalData.token),t.$store.dispatch("reloadUserInfo"),t.$message({message:"登录成功",type:"success"}),t.$router.push("/"))})},sendEmail:function(t){console.log(t)},register:function(t){var e,a=this,s=this;"show"==t&&(s.show.sendEmail=!0,(e={to:s.email},Object(r.a)({url:"/simpleLogin/sendEmailActiveCode",method:"get",params:e})).then(function(t){200==t.code&&(s.email_token=t.data)})),"confirm"==t&&function(t){return Object(r.a)({url:"/simpleLogin/register",method:"get",params:t})}(o()({username:s.username,nickname:s.nickname,raw_password:s.raw_password,email:s.email,captcha:s.captcha,token:s.email_token},"raw_password",s.password)).then(function(t){200==t.code?(a.$message({message:"注册成功",type:"success"}),a.$store.dispatch("GetInfo"),a.$router.push("/")):a.$message({message:"注册失败",type:"error"})}).catch(function(t){a.$message({message:"注册失败",type:"error"})})},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.log("参数验证不合法！"),!1;t.loading=!0,t.$store.dispatch("Login",t.loginForm).then(function(){t.loading=!1,t.$router.push({path:"/"}),t.$store.dispatch("GetInfo")}).catch(function(){t.loading=!1})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"login-form-layout"},[a("el-form",{attrs:{"label-position":"left"}},[a("div",{staticStyle:{"text-align":"center"}},[a("svg-icon",{staticStyle:{width:"56px",height:"56px",color:"#409EFF"},attrs:{"icon-class":"login-mall"}})],1),t._v(" "),a("h2",{staticClass:"login-title color-main"},[t._v("mall-admin-web")]),t._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text",autocomplete:"on",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username="string"==typeof e?e.trim():e},expression:"username"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"user"}})],1)])],1),t._v(" "),"register"==t.display?a("el-form-item",[a("el-input",{attrs:{type:"text",autocomplete:"on",placeholder:"请输入昵称"},model:{value:t.nickname,callback:function(e){t.nickname="string"==typeof e?e.trim():e},expression:"nickname"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"user"}})],1)])],1):t._e(),t._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"password",autocomplete:"on",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"password"}})],1),t._v(" "),a("span",{attrs:{slot:"suffix"},on:{click:t.showPwd},slot:"suffix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"eye"}})],1)])],1),t._v(" "),"register"==t.display?a("el-form-item",[a("el-input",{attrs:{type:"password",autocomplete:"on",placeholder:"请再次输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"password"}})],1),t._v(" "),a("span",{attrs:{slot:"suffix"},on:{click:t.showPwd},slot:"suffix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"eye"}})],1)])],1):t._e(),t._v(" "),"register"==t.display?a("el-form-item",[a("el-input",{attrs:{type:"email",autocomplete:"on",placeholder:"请输入邮箱"},model:{value:t.email,callback:function(e){t.email="string"==typeof e?e.trim():e},expression:"email"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"email"}})],1)])],1):t._e(),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"60px"}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:5,offset:13}},[a("el-link",{staticStyle:{float:"right"},on:{click:function(e){t.display="register"}}},[t._v("注册")])],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-link",{staticStyle:{float:"right"},attrs:{type:"danger"}},[t._v("忘记密码")])],1)],1),t._v(" "),"login"==t.display?a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",loading:t.loading},on:{click:t.login}},[t._v("登录")]):t._e(),t._v(" "),"register"==t.display?a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return e.preventDefault(),t.register("show")}}},[t._v("注册")]):t._e(),t._v(" "),"login"==t.display?a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",loading:t.loading}},[t._v("取消")]):t._e(),t._v(" "),"register"==t.display?a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){e.preventDefault(),t.display="login"}}},[t._v("返回登陆")]):t._e()],1)],1)],1),t._v(" "),a("img",{staticClass:"login-center-layout",attrs:{src:t.login_center_bg}}),t._v(" "),a("el-dialog",{attrs:{width:"250px",visible:t.show.sendEmail,title:"请输入验证码"},on:{"update:visible":function(e){return t.$set(t.show,"sendEmail",e)}}},[a("span",[t._v("我们已经将验证码发送到您的邮箱，请输入您收到的验证码：")]),t._v(" "),a("el-input",{model:{value:t.captcha,callback:function(e){t.captcha="string"==typeof e?e.trim():e},expression:"captcha"}}),t._v(" "),a("el-button",{on:{click:function(e){return t.register("confirm")}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,c,!1,function(t){a("r3o1")},"data-v-2a51482f",null);e.default=p.exports},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var s,o=a("C4MV"),i=(s=o)&&s.__esModule?s:{default:s};e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},hNpR:function(t,e,a){t.exports=a.p+"static/img/login_center_bg.5307896.png"},mClu:function(t,e,a){var s=a("kM2E");s(s.S+s.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},r3o1:function(t,e){}});